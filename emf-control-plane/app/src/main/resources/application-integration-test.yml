# Integration test profile
# Used by Docker Compose integration test environment

spring:
  datasource:
    url: jdbc:postgresql://postgres:5432/emf_control_plane
    username: emf
    password: emf

  kafka:
    bootstrap-servers: kafka:9092

  data:
    redis:
      host: redis
      port: 6379

  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: http://keycloak:8180/realms/emf
          jwk-set-uri: http://keycloak:8180/realms/emf/protocol/openid-connect/certs

  # Flyway
  flyway:
    baseline-on-migrate: true

emf:
  control-plane:
    kafka:
      enabled: true
    security:
      # Security enabled - bootstrap endpoint is public, other endpoints require auth
      enabled: true
      admin-role: ADMIN
      role-claim-name: roles

# Logging for integration tests
logging:
  level:
    root: INFO
    com.emf: DEBUG
    org.springframework.security: DEBUG
